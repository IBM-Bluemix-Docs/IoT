---

copyright:
years: 2017, 2018
lastupdated: "2018-08-28"

---

{:new_window: target="\_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}

# データ管理の概要
{: #device_twins}

<!--An unprecedented number of devices and sensors exist in the modern world. Connected devices generate vast amounts of digital data at extraordinary speeds. Such volumes of data represent great opportunities but also challenges, in terms of how big data can be processed, analyzed and presented to help to deliver insights and drive transformation.-->

デバイスは、類似したデータ出力を提供することがありますが、メーカー、モデル、およびバージョンが異なるとデータが異なる形式で出力されることがあります。例えば、オフィスの温度センサーを備えたデバイスには、温度を華氏で報告するものや、摂氏で報告するものがあります。そうしたすべての形式でデータをコンシュームできるようにアプリケーションを構成するのは効率的ではありません。その代わりに、データを収集、変換、および正規化して単一の論理モデルを作成し、アプリケーションがさまざまなデバイスと同じ方法で対話できるようにする必要があります。 

{{site.data.keyword.iot_short_notm}} のデータ管理コンポーネントには、デバイス・ツイン機能とアセット・ツイン機能が含まれます。デバイス・ツイン機能を使用すると、さまざまな形式のデバイス・データを収集、変換、および正規化して単一の論理モデルを作成できます。アセット・ツイン機能を使用すると、さまざまなデバイスをグループ化し、より価値の高いアセット・ベースのデータ構造であるモノを作成できます。さらに、モノをグループ化して新しいモノを作成することもできます。アプリケーションは、個々のデバイスまたはモノによって使用されるデータ形式に関係なく、論理モデルと対話できます。 

例えば、温度レポート・デバイス、湿度レポート・デバイス、および周辺光レポート・デバイスのグループを「Room」というモノに集約して、特定のオフィス内の快適レベルを表すことができます。多数の「Room」というモノを「Floor」というモノに集約して特定レベルにあるすべてのオフィスを表したり、多数の「Floor」というモノを「Building」という 1 つのモノに集約したりすることができます。モノの抽象化を使用することで、デバイスの接続方法、デバイスによるイベント・データのパブリッシュ形式、およびデータの結合方法という特性からアプリケーションが分離されます。
{: shortdesc}

## デバイス・ツイン

デバイス・ツインは、{{site.data.keyword.iot_short_notm}} に接続される物理デバイスのクラウド・ベースのデジタル表現です。デバイス・ツインは、デバイスによってパブリッシュされるイベントの論理モデルを表します。デバイス・ツインを定義してインスタンス化すると、デバイスがオンラインかオフラインかにかかわらず、REST のような方法でデバイスとやり取りする一貫性のある手段を備えることができます。 デバイスのプロパティーは、デバイスの現在の状態 (デバイス状態) に関する情報を含め、HTTP 要求を使用するか、IoT トピックをサブスクライブすることで取得できます。

デバイス・ツインは以下の点で役立ちます。
- REST のような方法でイベント・ドリブンのデバイス・データにアクセスできる統一インターフェースをアプリケーション開発者に提供する。
- デバイスの状態にアクセスする。
- さまざまなメーカーやモデルのデバイスからさまざまな形式でパブリッシュされるデータを正規化する。
- 不要なデータをフィルタリングして除外する。


デバイス・ツインを作成するには、{{site.data.keyword.iot_short_notm}} で以下のリソースを定義する必要があります。
- デバイスによって送信されるイベントの構造。  
インバウンド・イベントの構造は、物理インターフェース、イベント・タイプ、イベント・スキーマのリソースで定義します。 
- 記録する必要があるプロパティー。  
これらのプロパティーは、アプリケーションでコンシューム可能なデバイス状態の論理構造を定義します。 これらのプロパティーは、論理インターフェースと論理スキーマのリソースで定義します。  
- 物理インターフェース・イベントの論理インターフェース・プロパティーへのマッピング。  
マッピング・リソースを使用して、イベントをプロパティーにマップします。

以下の図は、別々の場所にある 2 つの異なる温度デバイスを示しています。1 つはデバイス・データを摂氏で報告するデバイスで、もう 1 つはデータを華氏で報告するデバイスです。データは、{{site.data.keyword.iot_short_notm}} に「t」および「temp」の温度形式で送信されます。{{site.data.keyword.iot_short_notm}} によって、華氏が摂氏に自動的に変換されます。「t」および「temp」の温度形式は、「temperature」論理形式に正規化されます。アプリケーションは、「temperature」パラメーターの値にアクセスして、いずれかのデバイスの状態を照会できます。 

![{{site.data.keyword.iot_short_notm}} でのデータ管理の概要。](../information_management/images/ga_im_resources_overview.svg "{{site.data.keyword.iot_short_notm}} でのデータ管理の概要")


## アセット・ツイン (モノ)

アセット・ツインにより、デバイス・ツインの概念をさらに深めることができます。アセット・ツインを使用すると、デバイスをモノと呼ばれる単一のエンティティーに集約できます。モノ (アセット・ツイン) の概念はデバイス・ツインと類似していますが、アセット・ツインは、デバイスのグループを単一の論理モデルとして表します。さらに、モノを集約して、より高いレベルの抽象化を形成できます。例えば、「Room」というモノにより、以下のデバイスを集約できます。

- 温度センサーを備えたデバイス (温度計)
- 湿度センサーを備えたデバイス (湿度計)

その後、「Floor」というモノにより、複数の「Room」というモノを集約できます。 

モノの構造は、JSON スキーマを使用して定義されます。このスキーマは、集約されたデバイスまたはモノの論理インターフェースを参照します。モノの現在の状態に関する情報を含む、モノのプロパティーは、HTTP 要求を使用するか、または IoT トピックをサブスクライブすることで取得できます。

アセット・ツインは以下の点で役立ちます。
 
- 複数のデバイス・ツインまたはモノを集約して、新しいモノを定義する。
- モノの状態にアクセスする。
- アセットを個別の計測機能に公開せずに管理する。
- 不要なデータをフィルタリングして除外する。
- モノ・インターフェースを正規化して、特定のモノの複雑な構成方法からアプリケーションを分離する。


アセット・ツインを作成するには、{{site.data.keyword.iot_short_notm}} で以下のリソースを定義する必要があります。

- モノの構造。  
モノの構造は、集約されたデバイスまたはモノを指定するモノのスキーマによって定義されます。
- 記録するプロパティーで構成された必要なモノの状態の構造。  
これらのプロパティーは、アプリケーションでコンシューム可能なモノの状態の論理構造を定義します。 これらのプロパティーは、論理インターフェースと論理スキーマのリソースで定義します。  
- モノ・インターフェースを論理インターフェース・プロパティーにマップする方法。  
マッピング・リソースを使用して、イベントをプロパティーにマップします。


以下の図は、{{site.data.keyword.iot_short_notm}} に温度イベント・データと湿度イベント・データをパブリッシュする異なるデバイス上の温度センサーと湿度センサーを示しています。それぞれ物理デバイスを表している 2 つのデバイス・ツインには、論理インターフェースが関連付けられており、{{site.data.keyword.iot_short_notm}} で作成されます。温度デバイスからパブリッシュされるデータは、「IThermometer」論理インターフェースにマップされます。湿度デバイスからパブリッシュされるデータは、「IHygrometer」論理インターフェースにマップされます。論理インターフェースは、*Room* というモノ・タイプに「IRoom」論理インターフェースとともに集約されます。「IRoom」論理インターフェースでは、温度と湿度のプロパティーを定義します。このインターフェースを使用して、アプリケーションによって対話可能な単一のモノにデバイスを集約することで、独自の論理モデルを作成できます。  

![{{site.data.keyword.iot_short_notm}} でのデータ管理の概要。](../information_management/images/Thing)

**重要:** {{site.data.keyword.iot_short_notm}} モノ機能は、限定されたベータ・プログラムの一部としてのみ使用できます。今後の更新によって、この機能の現行バージョンと互換性のない変更が行われる可能性があります。 この機能を試して、[ご意見をお寄せください ![外部リンク・アイコン](../../../icons/launch-glyph.svg)](https://developer.ibm.com/answers/smart-spaces/17/internet-of-things.html){: new_window}。


主要な情報とリソースの定義と構成について詳しくは、[データ管理の解説](ga_im_definitions.html)を参照してください。 

## 次の手順

- {{site.data.keyword.iot_short_notm}} で、独自のデバイス・ツインを作成します。詳しくは、[Web インターフェースを使用したデータ管理の概説](im_ui_flow.html)の資料を参照してください。 
- REST API を使用して、デバイス・ツインおよびアセット・ツインを作成します。詳しくは、[データ管理の概説](../information_management/getting_started_things.html)の資料を参照してください。  
- 指定された条件または一連の条件と一致するイベント・データが {{site.data.keyword.iot_short_notm}} で受信された場合にトリガーされるルールを作成します。詳しくは、[組み込みルール](../information_management/im_rules.html)のベータ版資料を参照してください。

*データ管理の概説*の資料で概説されている各ステップについて詳しくは、以下のトピックに示されているサンプル・シナリオを参照してください。 

- [ステップバイステップ・ガイド 1: 共通インターフェースによってデバイスを処理する方法を詳細に示す例](ga_im_index_scenario.html#scenario) 
- [ステップバイステップ・ガイド 2: 共通インターフェースによってモノを処理する方法を詳細に示す例](../information_management/im_index_scenario_thing.html#scenario) 


